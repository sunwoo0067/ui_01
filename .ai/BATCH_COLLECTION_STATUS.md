# 배치 수집 진행 현황 (2025-10-07 14:50)

## 전체 수집 현황

| 공급사 | 수집 방식 | 진행 상태 | 현재 | 목표 |
|--------|-----------|-----------|------|------|
| **젠트레이드** | XML API (전체) | 완료 (재수집 필요 시) | 3,510개 | 3,510개 |
| **오너클랜** | allItems GraphQL | 준비 중 (커서 페이징 구현 필요) | 전체 조회 됨 | 60,000개 이상 |
| **도매꾹** | 키워드 검색 | 준비 중 (키워드 확보 필요) | 1,000개 | 20,000개 |
| **도매매** | 키워드 검색 | 준비 대기 (키워드 리스트 작성) | 0개 | 10,000개 |
| **합계** | - | - | 4,510개 + 오너클랜 조회 됨 | 100,000개 |

---

## 최근 작업 진행상황

### 도매꾹/도매매 API
- [완료 예] `getCategoryList` 호출 시 404 UNKNOWN_SERVICE 에러 → API 파라미터 형식 수정
- [완료 예] 카테고리 검색 시 일부만 결과가 0건 반환 → 실전에서 카테고리보다는 키워드 필요
- [완료 예] 키워드 검색 API (`sz=200`) 정상 활용/중복 제거 확보
- [완료 예] 판매처 ID 리스트 검색 시 실제 상품 확인
- [완료] JSON 응답 구조 (`list.item`, `numberOfItems`) 파싱 처리 완료

### 오너클랜 GraphQL
- [준비 중] `allItems(first: 1000)` 페이지네이션 시 `hasNextPage` 처리 필요
- [준비 중] `status="available"` 필터링 처리 (ACTIVE/SELLING 속성값 포함)
- [준비 중] `category { key, name }`, `images(size: large)`, `boxQuantity` 필수 필드 미가져옴

### 젠트레이드 XML
- [완료] POST 요청 + 응답 인코딩 처리 (EUC-KR 지원)
- [완료] 3,510개 전체 배치 수집 완료

---

## 후속 작업

1. **오너클랜 배치 수집 완료**
   - 페이지네이션 커서 프로세싱 후 커서 페이징 구현 확보
   - 전체 데이터셋을 단계별/대용량 처리

2. **도매꾹/도매매 키워드 리스트 마련하기**
   - 30~50개 주요 키워드 작성
   - 카테고리번호/판매처 ID 기반 보조로 활용하기

3. **키워드 배치 수집 구현**
   - `sz=200` 파싱 페이징/중복 제거 처리
   - API 호출 간격 파싱으로 응답 시간 관리

4. **데이터 정규화 및 검증**
   - ProductPipeline 필터를 활용
   - 누락/중복 처리하여 품질 검증

---

## 점검용 스크립트

### 수집용
- `collect_ownerclan_batch_full.py` - 오너클랜 전체 배치
- `collect_domaemae_by_item_numbers.py` - 도매매 키워드 배치 (스크립트 준비)

### 분석/테스트용
- `check_collection_status.py` - 전체 현황 확인
- `check_ownerclan_status.py` - 오너클랜 status 조회
- `test_domaemae_official_example.py` - 공식 응답 테스트
- `get_real_category_list.py` - `getCategoryList` 시도/응답 검증

### 정리 필요
- 임시 테스트 스크립트 삭제 및 API 응답 JSON제거

