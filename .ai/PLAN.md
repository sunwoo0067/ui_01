# 프로젝트 실행 계획 (Project Plan)

> **목적**: 멀티 AI 에디터 간 작업 진행 상황 공유 및 TODO 관리

## 현재 상태 (Current Status)

### ✅ 완료된 작업
- **데이터베이스 설정**: Supabase 프로젝트 `ui_01` 생성 및 스키마 마이그레이션 완료 (15개 테이블)
- **공급사 API 연동**: 오너클랜, 젠트레이드, 도매꾹 3개 주요 공급사 완료
- **대량 데이터 수집**: 72,376개 상품 정규화 완료 (오너클랜 64,845개, 젠트레이드 3,510개, 도매꾹 4,021개)
- **배치 처리 최적화**: 중복 제거, 대량 insert/upsert, 5,000개 배치 처리
- **주문 추적 시스템**: 도매꾹 주문 API 연동 및 상태 동기화
- **경쟁사 데이터 수집**: 쿠팡, 네이버 스마트스토어 상품 검색 및 가격 모니터링
- **AI 가격 예측**: 머신러닝 모델(RandomForest, XGBoost, LightGBM) 기반 가격 예측
- **REST API 서버**: FastAPI 기반 포괄적인 REST API 구현 (9개 카테고리)
- **마켓플레이스 판매자 API**: 쿠팡, 네이버, 11번가, 지마켓, 옥션 통합 (상품 등록/재고/주문)

### 📊 데이터베이스 현황
- **정규화 상품**: 72,376개
- **원본 데이터**: 65,434개 (오너클랜)
- **공급사**: 3개 (오너클랜, 젠트레이드, 도매꾹)
- **마켓플레이스**: 5개 (쿠팡, 네이버, 11번가, 지마켓, 옥션)

---

## 다음 단계 TODO (우선순위 순)

### 🔥 우선순위 1: 마켓플레이스 실제 상품 등록 테스트 (진행 중)

**목표**: API 통합 코드가 완성되었으므로 실제 판매자 계정으로 상품 등록 테스트

**현재 상태 (2025-10-07 18:00 업데이트)**:
- ✅ 마이그레이션 005 적용 완료 (marketplace_orders, inventory_sync_log, api_logs 테이블)
- ✅ 마켓플레이스 5개 등록 완료
- ✅ 시스템 구조 검증 완료
- ✅ 쿠팡 API 키 설정 완료 (Vendor ID: A01282691)
- ✅ 쿠팡 판매 계정 DB 저장 완료 (계정 ID: bf5613e2-2303-4e87-a085-a26dfd76b30c)
- ⏭️ 다음: 쿠팡 API 실제 구현 및 상품 등록 테스트

#### 1.1 판매자 계정 API 키 등록
- [x] **쿠팡 Wing API 키 발급** ✅ 완료
  - [x] 쿠팡 판매자 센터에서 API 키 발급
  - [x] 계정 정보 DB 저장 완료 (Vendor ID: A01282691)
  - [x] 계정 ID: bf5613e2-2303-4e87-a085-a26dfd76b30c
- [ ] **네이버 스마트스토어 OAuth 인증**
  - [ ] 네이버 커머스 API 애플리케이션 등록
  - [ ] Client ID, Secret 발급
  - [ ] `.env` 파일에 입력 및 DB 저장
- [ ] **11번가 OpenAPI 키 발급**
  - [ ] 11번가 판매자 센터에서 API 키 발급
  - [ ] `.env` 파일에 입력 및 API 키 DB 저장
- [ ] **지마켓/옥션 API 키 발급** (선택사항)
  - [ ] 판매자 센터에서 API 키 발급
  - [ ] API 키 DB 저장

**참고 문서**:
- [API_KEYS_SETUP_GUIDE.md](../API_KEYS_SETUP_GUIDE.md)
- [MARKETPLACE_SETUP_STATUS.md](../MARKETPLACE_SETUP_STATUS.md)

#### 1.2 실제 상품 등록 테스트
- [ ] **테스트 상품 선정** (정규화된 72,376개 중 10개)
  - [ ] 카테고리별 대표 상품 선정
  - [ ] 가격 규칙 적용 확인
- [ ] **마켓플레이스별 등록 테스트**
  - [ ] 쿠팡: 상품 등록 API 호출 및 결과 확인
  - [ ] 네이버: 상품 등록 API 호출 및 결과 확인
  - [ ] 11번가: 상품 등록 API 호출 및 결과 확인
- [ ] **재고 동기화 테스트**
  - [ ] 재고 업데이트 API 호출
  - [ ] marketplace_inventory_sync_log 테이블 확인
- [ ] **주문 조회 테스트**
  - [ ] 마켓플레이스 주문 조회 API 호출
  - [ ] marketplace_orders 테이블 저장 확인

**완료 조건**: 5개 마켓플레이스에 최소 1개 이상 상품 등록 성공

---

### 📈 우선순위 2: 경쟁사 데이터 수집 강화 (높음)

**목표**: 11번가, 옥션, 지마켓 경쟁사 데이터 수집 추가

#### 2.1 11번가 경쟁사 데이터 수집
- [ ] **11번가 상품 검색 API 연동**
  - [ ] API 문서 분석 (검색 엔드포인트)
  - [ ] Eleventh11stMarketplace 클래스에 search_products 구현
- [ ] **데이터 수집 테스트**
  - [ ] 키워드 기반 검색 테스트 (10개 상품)
  - [ ] competitor_products 테이블 저장 확인

#### 2.2 옥션/지마켓 경쟁사 데이터 수집
- [ ] **옥션 상품 검색 API 연동**
  - [ ] IAuctionMarketplace 클래스에 search_products 구현
- [ ] **지마켓 상품 검색 API 연동**
  - [ ] GmarketMarketplace 클래스에 search_products 구현

#### 2.3 가격 모니터링 강화
- [ ] **스케줄링 시스템 구현**
  - [ ] 1시간마다 경쟁사 가격 수집
  - [ ] price_history 테이블에 히스토리 저장
- [ ] **가격 변동 알림 시스템**
  - [ ] 경쟁사 가격 10% 이상 변동 시 알림
  - [ ] 가격 하락 추세 분석

**완료 조건**: 5개 마켓플레이스에서 경쟁사 데이터 최소 100개 이상 수집

---

### 🤖 우선순위 3: AI 가격 예측 모델 학습 및 최적화 (중간)

**목표**: 수집된 데이터를 활용하여 AI 모델 학습 및 예측 정확도 향상

#### 3.1 모델 학습 데이터 준비
- [ ] **학습 데이터셋 생성**
  - [ ] 72,376개 상품 데이터 전처리
  - [ ] 카테고리, 가격, 재고, 경쟁사 가격 피처 추출
  - [ ] Train/Test 데이터 분할 (80/20)

#### 3.2 모델 학습 및 평가
- [ ] **RandomForest 모델 학습**
  - [ ] Hyperparameter 튜닝
  - [ ] R² 점수, MAE, RMSE 평가
- [ ] **XGBoost 모델 학습**
  - [ ] Hyperparameter 튜닝
  - [ ] 성능 비교
- [ ] **LightGBM 모델 학습**
  - [ ] Hyperparameter 튜닝
  - [ ] 최종 모델 선정

#### 3.3 예측 결과 검증
- [ ] **가격 예측 테스트**
  - [ ] 테스트 데이터셋으로 예측
  - [ ] 실제 시장 가격과 비교
- [ ] **모델 성능 추적**
  - [ ] model_performance 테이블에 성능 기록
  - [ ] 주기적 재학습 스케줄 설정

**완료 조건**: R² 점수 0.85 이상 달성

---

### 🌐 우선순위 4: 웹 대시보드 프론트엔드 개발 (중간)

**목표**: REST API 서버가 준비되었으므로 React/Vue 기반 웹 대시보드 구축

#### 4.1 프론트엔드 프로젝트 설정
- [ ] **프로젝트 초기화**
  - [ ] React + TypeScript + Vite 설정
  - [ ] TailwindCSS 설치
  - [ ] API 클라이언트 설정 (axios)

#### 4.2 주요 페이지 구현
- [ ] **대시보드 홈 페이지**
  - [ ] 상품 통계 (총 상품 수, 마켓플레이스별 등록 현황)
  - [ ] 주문 통계 (오늘의 주문, 주간/월간 트렌드)
  - [ ] 수익 분석 차트
- [ ] **상품 관리 페이지**
  - [ ] 상품 목록 (페이지네이션, 검색, 필터)
  - [ ] 상품 상세보기
  - [ ] 마켓플레이스 일괄 등록
- [ ] **가격 모니터링 페이지**
  - [ ] 경쟁사 가격 비교 차트
  - [ ] AI 가격 추천
  - [ ] 가격 히스토리 그래프

#### 4.3 인증 시스템
- [ ] **로그인/로그아웃 UI**
  - [ ] Bearer Token 인증
  - [ ] 토큰 저장 (localStorage)

**완료 조건**: 주요 페이지 3개 이상 구현 및 REST API 연동 완료

---

### 💳 우선순위 5: 트랜잭션 시스템 구현 (낮음 - 데이터베이스 구축 후)

**목표**: 실제 주문 처리 및 정산 시스템 구현

#### 5.1 주문 처리 시스템
- [ ] **주문 수신 시스템**
  - [ ] 마켓플레이스별 주문 웹훅 연동
  - [ ] 주문 데이터 파싱 및 저장
- [ ] **공급사 주문 전송**
  - [ ] 공급사 주문 API 호출
  - [ ] 주문 상태 추적 (pending → confirmed → shipped)

#### 5.2 재고 관리 시스템
- [ ] **실시간 재고 동기화**
  - [ ] 공급사 재고 조회 (1시간마다)
  - [ ] 마켓플레이스 재고 업데이트
- [ ] **품절 처리**
  - [ ] 재고 0개 시 마켓플레이스 상품 비활성화

#### 5.3 정산 시스템
- [ ] **매출/비용 계산**
  - [ ] 마켓플레이스 수수료 계산
  - [ ] 순이익 계산
- [ ] **정산 리포트**
  - [ ] 일/주/월 정산 보고서 생성
  - [ ] CSV 내보내기

**완료 조건**: 실제 주문 1건 이상 처리 성공

---

## 참고 문서 (References)

- [README.md](../README.md) - 프로젝트 개요
- [ARCHITECTURE.md](./ARCHITECTURE.md) - 아키텍처
- [DEVELOPMENT.md](./DEVELOPMENT.md) - 개발 가이드
- [SUPABASE_GUIDE.md](./SUPABASE_GUIDE.md) - Supabase 사용법
- [MCP_GUIDE.md](./MCP_GUIDE.md) - MCP 설정
- [CODING_RULES.md](./CODING_RULES.md) - 코딩 규칙 (Python 중심)

---

## 업데이트 이력 (최근 5개)

- **2025-10-07 [Claude Code]**: PLAN.md 대폭 정리 및 구조 개선
  - 중복 내용 제거 (Phase 1-6 완료 섹션 통합)
  - 구체적인 TODO 5단계로 재구성 (우선순위 명확화)
  - 현재 상태 요약 강화 (72,376개 상품 정규화 완료)
  - 다음 단계 명확화 (마켓플레이스 실제 등록 테스트부터)
  - 업데이트 이력 최근 5개만 유지

- **2025-10-07 [Claude Code]**: 마켓플레이스 판매자 API 통합 구현 완료
  - 5개 마켓플레이스 통합: 쿠팡, 네이버, 11번가, 지마켓, 옥션
  - 상품 등록/수정/삭제, 재고 동기화, 주문 관리 기능
  - MarketplaceManager 통합 관리 서비스
  - 계정 설정 스크립트 및 통합 테스트 완성

- **2025-10-07 [Claude Code]**: REST API 서버 구현 완료
  - FastAPI 기반 포괄적인 REST API 서버
  - 9개 카테고리 API (상품, 검색, AI, 주문, 공급사, 분석, 배치)
  - Bearer Token 인증 및 Swagger UI 문서화
  - 통합 테스트 100% 성공률

- **2025-10-07 [Claude Code]**: AI 가격 예측 시스템 구현 완료
  - 머신러닝 모델(RandomForest, XGBoost, LightGBM) 가격 예측
  - 시장 트렌드 분석 (가격 방향성, 변동성, 계절성)
  - 최적 가격 전략 제안 (competitive, premium, aggressive, conservative)

- **2025-10-07 [Cursor]**: 대량 정규화 완료
  - 72,376개 상품 정규화 완료 (오너클랜, 젠트레이드, 도매꾹)
  - 400개/초 처리 속도, bulk insert/upsert 최적화

---

## 작업 시 주의사항

1. **우선순위 준수**: 위에서 아래 순서대로 진행 (1 → 2 → 3 → 4 → 5)
2. **체크박스 업데이트**: 작업 완료 시 `[ ]` → `[x]` 변경 및 완료 조건 확인
3. **이슈 발견 시**: 각 우선순위 섹션에 주석 추가
4. **문서 동기화**: 모든 AI 에디터가 공유하는 문서이므로 항상 최신 상태 유지
5. **커밋 포함**: PLAN.md 변경사항도 Git 커밋에 포함
6. **업데이트 이력**: 주요 작업 완료 시 최상단에 추가하고 오래된 항목은 삭제 (최근 5개만 유지)
